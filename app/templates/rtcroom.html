{% extends "base.html" %}

{% block app_content %}
<div class="modal" id="user-profile-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <p class="modal-title">Enter your display name</p>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <input type="text" class="form-control" id="username-input">
                    <div class="input-group-append">
                        <button type="button" class="btn btn-primary" id="user-profile-save" data-dismiss="modal" onclick="saveUserProfile()">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-8">
        <div class="row">
            <div class="col">
                <div id="video-stage">
                </div>
                <div id="control-bar">
                    <button class="btn" id="toggle-video" onclick="toggleVideo()">
                        <i id="toggle-video-icon" class="material-icons">videocam</i></button>
                    <button class="btn" id="toggle-audio" onclick="toggleAudio()">
                        <i id="toggle-audio-icon" class="material-icons">mic</i></button>
                    <button class="btn" id="toggle-display" onclick="toggleDisplay()">
                        <i id="toggle-display-icon" class="material-icons">stop_screen_share</i></button>
                    <!-- button class="btn" id="toggle-messages" onclick="toggleMessageBar()">
                        <i id="toggle-messages-icon" class="material-icons">chat</i></button-->
                </div>
                <div id="debug-bar">
                    <hr>
                    <button class="btn" data-toggle="collapse" data-target="#debug-collapse">
                        Debug
                    </button>
                    <div class="collapse" id="debug-collapse">
                        <p>[Hint: open the console for logging]</p>
                        <button class="btn" id="debug-media-info" onclick="mediaInfo()">Media info</button>
                        <button class="btn" id="debug-ping" onclick="ping()">Ping</button>
                        <button class="btn" id="debug-get_room_info" onclick="get_room_info()">Room info</button>
                        <button class="btn" id="debug-greeting" onclick="greeting()">Greeting</button>
                        <button class="btn" id="debug-desktop" onclick="streamDisplay()">Share Desktop</button>
                        <button class="btn" id="debug-webcam" onclick="streamVideo()">Webcam on</button>
                        <button class="btn" id="debug-shutdown" onclick="shutdown()">Shutdown</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="col-md-4" id="accordion">
        <div class="card">
            <div class="card-header">
                <button class="btn btn-link" data-toggle="collapse" data-target="#video-thumbs-collapse">
                    Video Feeds
                </button>
            </div>
            <div id="video-thumbs-collapse" class="collapse show" data-parent="#accordion">
                <div id="video-thumbs">
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <button class="btn btn-link" data-toggle="collapse" data-target="#message-bar-collapse">
                    Messages
                </button>
            </div>
            <div id="message-bar-collapse" class="collapse" data-parent="#accordion">
                <div class="card-body" id="message-bar">
                    <div id="message-log"></div>

                    <div class="input-group">
                        <input type="text" class="form-control" id="message-input" placeholder="Type a message">
                        <div class="input-group-append">
                            <button class="btn" id="send-message" onclick="sendMessage()">
                                <i id="send-message-icon" class="material-icons">send</i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
</div>


<script src="{{ url_for('static', filename='ui.js') }}"></script>
<script src="{{ url_for('static', filename='rtcclient.js') }}"></script>
{% endblock %}
